<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèçÔ∏è Jeu de Moto Racing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 3px solid #333;
            border-radius: 15px;
            overflow: hidden;
            background: linear-gradient(180deg, #87CEEB 0%, #90EE90 50%, #228B22 100%);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .road {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 400px;
            background: linear-gradient(90deg, 
                #404040 0%, #505050 20%, #404040 40%, 
                #505050 60%, #404040 80%, #505050 100%);
        }

        .road-line {
            position: absolute;
            width: 8px;
            height: 60px;
            background: #FFD700;
            border-radius: 4px;
            animation: moveRoad 0.5s linear infinite;
        }

        @keyframes moveRoad {
            0% { transform: translateY(0px); }
            100% { transform: translateY(60px); }
        }

        .motorcycle {
            position: absolute;
            width: 60px;
            height: 100px;
            left: 50%;
            transform: translateX(-50%);
            bottom: 50px;
            z-index: 100;
            transition: left 0.1s;
        }

        .bike-body {
            position: absolute;
            width: 40px;
            height: 80px;
            background: linear-gradient(45deg, #FF0000, #CC0000);
            border-radius: 15px;
            left: 10px;
            bottom: 10px;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
        }

        .bike-wheel {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #333;
            border-radius: 50%;
            border: 3px solid #666;
            animation: spin 0.3s linear infinite;
        }

        .bike-wheel.front {
            bottom: 5px;
            left: 35px;
        }

        .bike-wheel.rear {
            bottom: 5px;
            left: 5px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .rider {
            position: absolute;
            width: 25px;
            height: 40px;
            background: #000080;
            border-radius: 15px 15px 5px 5px;
            left: 17px;
            bottom: 50px;
        }

        .helmet {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #FFD700;
            border-radius: 50%;
            top: -15px;
            left: 2px;
            border: 2px solid #FFA500;
        }

        .enemy-car {
            position: absolute;
            width: 50px;
            height: 80px;
            background: linear-gradient(45deg, #800080, #4B0082);
            border-radius: 10px;
            z-index: 50;
            border: 2px solid #333;
        }

        .car-window {
            position: absolute;
            width: 35px;
            height: 20px;
            background: rgba(135, 206, 235, 0.8);
            border-radius: 5px;
            left: 7px;
            top: 15px;
        }

        .car-wheel {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #333;
            border-radius: 50%;
            border: 1px solid #666;
        }

        .car-wheel.front-left { bottom: 5px; left: 2px; }
        .car-wheel.front-right { bottom: 5px; right: 2px; }
        .car-wheel.rear-left { top: 5px; left: 2px; }
        .car-wheel.rear-right { top: 5px; right: 2px; }

        .obstacle {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #8B4513;
            border-radius: 50%;
            border: 3px solid #654321;
            z-index: 30;
        }

        .tree {
            position: absolute;
            width: 30px;
            height: 120px;
            z-index: 20;
        }

        .tree-trunk {
            position: absolute;
            width: 8px;
            height: 60px;
            background: #8B4513;
            border-radius: 4px;
            left: 11px;
            bottom: 0;
        }

        .tree-crown {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #228B22;
            border-radius: 50%;
            top: 30px;
            animation: sway 3s ease-in-out infinite;
        }

        @keyframes sway {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(2deg); }
        }

        .speedometer {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 100px;
            height: 100px;
            border: 3px solid #333;
            border-radius: 50%;
            background: radial-gradient(circle, #f0f0f0, #ddd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .speed-needle {
            position: absolute;
            width: 2px;
            height: 35px;
            background: #FF0000;
            border-radius: 1px;
            transform-origin: bottom center;
            transition: transform 0.3s;
        }

        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .score {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .distance {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .level {
            font-size: 16px;
            color: #FFD700;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: linear-gradient(45deg, rgba(0,0,0,0.9), rgba(50,50,50,0.9));
            color: white;
            padding: 40px;
            border-radius: 20px;
            z-index: 1000;
            display: none;
            border: 3px solid #FF0000;
            box-shadow: 0 10px 30px rgba(255,0,0,0.3);
        }

        .game-over h2 {
            margin-bottom: 15px;
            color: #FF6B6B;
            font-size: 28px;
        }

        .game-over button {
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255,107,107,0.3);
        }

        .game-over button:hover {
            background: linear-gradient(45deg, #FF4757, #FF3742);
            transform: translateY(-2px);
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            font-size: 16px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            background: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 15px;
        }

        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(30,60,114,0.95), rgba(42,82,152,0.95));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .start-screen h1 {
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
            font-size: 36px;
        }

        .start-button {
            background: linear-gradient(45deg, #FF6B6B, #FF4757);
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(255,107,107,0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-button:hover {
            background: linear-gradient(45deg, #FF4757, #FF3742);
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(255,107,107,0.6);
        }

        .nitro-bar {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 200px;
            height: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            border: 2px solid #333;
            overflow: hidden;
        }

        .nitro-fill {
            height: 100%;
            background: linear-gradient(90deg, #00FF00, #32CD32);
            width: 100%;
            transition: width 0.3s;
            border-radius: 8px;
        }

        .explosion {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #FF4500, #FF6347, transparent);
            border-radius: 50%;
            animation: explode 0.5s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% { 
                transform: scale(0.1);
                opacity: 1;
            }
            100% { 
                transform: scale(3);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="game-container" id="gameContainer">
        <!-- √âcran de d√©marrage -->
        <div class="start-screen" id="startScreen">
            <h1>üèçÔ∏è MOTO RACING EXTREME üèçÔ∏è</h1>
            <p style="margin-bottom: 30px; color: white; font-size: 18px;">Utilisez les fl√®ches ‚Üê‚Üí pour √©viter les obstacles !</p>
            <button class="start-button" onclick="startGame()">üèÅ D√âMARRER LA COURSE üèÅ</button>
        </div>

        <!-- Route -->
        <div class="road" id="road"></div>

        <!-- Moto du joueur -->
        <div class="motorcycle" id="motorcycle">
            <div class="rider">
                <div class="helmet"></div>
            </div>
            <div class="bike-body"></div>
            <div class="bike-wheel front"></div>
            <div class="bike-wheel rear"></div>
        </div>

        <!-- HUD (Interface utilisateur) -->
        <div class="hud">
            <div class="score" id="score">Score: 0</div>
            <div class="distance" id="distance">Distance: 0m</div>
            <div class="level" id="level">Niveau: 1</div>
        </div>

        <!-- Compteur de vitesse -->
        <div class="speedometer">
            <div class="speed-needle" id="speedNeedle"></div>
            <div>
                <div style="font-size: 12px;">KM/H</div>
                <div id="speedValue">0</div>
            </div>
        </div>

        <!-- Barre de nitro -->
        <div class="nitro-bar">
            <div class="nitro-fill" id="nitroFill"></div>
        </div>
        <div style="position: absolute; bottom: 45px; right: 20px; color: white; font-size: 12px; text-shadow: 1px 1px 2px black;">
            NITRO (Maintenez N)
        </div>

        <!-- Instructions -->
        <div class="instructions">
            üèçÔ∏è Fl√®ches ‚Üê‚Üí pour bouger | N pour le nitro | √âvitez les obstacles !
        </div>

        <!-- √âcran de fin de jeu -->
        <div class="game-over" id="gameOver">
            <h2>ÔøΩ CRASH ! Latif sale neuil ! ÔøΩ</h2>
            <p style="margin: 10px 0;">Score final: <span id="finalScore">0</span></p>
            <p style="margin: 10px 0;">Distance parcourue: <span id="finalDistance">0</span>m</p>
            <p style="margin: 10px 0;">Niveau atteint: <span id="finalLevel">1</span></p>
            <button onclick="restartGame()">üîÑ REJOUER</button>
        </div>
    </div>

    <script>
        let gameStarted = false;
        let gameRunning = false;
        let motorcycleX = 400; // Position horizontale de la moto
        let obstacles = [];
        let trees = [];
        let roadLines = [];
        let score = 0;
        let distance = 0;
        let level = 1;
        let gameSpeed = 5;
        let obstacleFrequency = 0;
        let treeFrequency = 0;
        let roadLineFrequency = 0;
        let nitro = 100;
        let isNitroActive = false;
        let keys = {};

        // √âl√©ments DOM
        const motorcycle = document.getElementById('motorcycle');
        const gameContainer = document.getElementById('gameContainer');
        const scoreElement = document.getElementById('score');
        const distanceElement = document.getElementById('distance');
        const levelElement = document.getElementById('level');
        const gameOverScreen = document.getElementById('gameOver');
        const startScreen = document.getElementById('startScreen');
        const finalScoreElement = document.getElementById('finalScore');
        const finalDistanceElement = document.getElementById('finalDistance');
        const finalLevelElement = document.getElementById('finalLevel');
        const speedNeedle = document.getElementById('speedNeedle');
        const speedValue = document.getElementById('speedValue');
        const nitroFill = document.getElementById('nitroFill');
        const road = document.getElementById('road');

        // Constantes du jeu
        const MOTORCYCLE_SPEED = 8;
        const NITRO_SPEED = 15;
        const ROAD_WIDTH = 400;
        const LANES = 5;
        const LANE_WIDTH = ROAD_WIDTH / LANES;

        function startGame() {
            startScreen.style.display = 'none';
            gameStarted = true;
            gameRunning = true;
            resetGame();
            createInitialRoadLines();
            gameLoop();
        }

        function resetGame() {
            motorcycleX = 400;
            obstacles = [];
            trees = [];
            roadLines = [];
            score = 0;
            distance = 0;
            level = 1;
            gameSpeed = 5;
            obstacleFrequency = 0;
            treeFrequency = 0;
            roadLineFrequency = 0;
            nitro = 100;
            isNitroActive = false;
            
            updateHUD();
            updateMotorcyclePosition();
            
            // Supprimer tous les √©l√©ments existants
            document.querySelectorAll('.enemy-car, .obstacle, .tree, .road-line, .explosion').forEach(el => el.remove());
        }

        function createInitialRoadLines() {
            for (let i = 0; i < 10; i++) {
                createRoadLine(i * 70);
            }
        }

        function createRoadLine(y = 600) {
            const line = document.createElement('div');
            line.className = 'road-line';
            line.style.left = '396px'; // Centre de la route
            line.style.top = y + 'px';
            gameContainer.appendChild(line);
            roadLines.push({ element: line, y: y });
        }

        function updateMotorcyclePosition() {
            // Limiter la moto aux limites de la route
            motorcycleX = Math.max(200, Math.min(600, motorcycleX));
            motorcycle.style.left = motorcycleX + 'px';
        }

        function createEnemyCar() {
            const car = document.createElement('div');
            car.className = 'enemy-car';
            
            // Cr√©er les d√©tails de la voiture
            car.innerHTML = `
                <div class="car-window"></div>
                <div class="car-wheel front-left"></div>
                <div class="car-wheel front-right"></div>
                <div class="car-wheel rear-left"></div>
                <div class="car-wheel rear-right"></div>
            `;
            
            // Position al√©atoire sur une des voies
            const lanes = [220, 300, 380, 460, 540];
            const laneX = lanes[Math.floor(Math.random() * lanes.length)];
            car.style.left = laneX + 'px';
            car.style.top = '600px';
            
            // Couleurs al√©atoires
            const colors = ['#800080', '#FF6347', '#4169E1', '#32CD32', '#FFD700'];
            car.style.background = `linear-gradient(45deg, ${colors[Math.floor(Math.random() * colors.length)]}, #333)`;
            
            gameContainer.appendChild(car);
            obstacles.push({ element: car, x: laneX, y: 600, type: 'car' });
        }

        function createObstacle() {
            const obstacle = document.createElement('div');
            obstacle.className = 'obstacle';
            
            const lanes = [220, 300, 380, 460, 540];
            const laneX = lanes[Math.floor(Math.random() * lanes.length)];
            obstacle.style.left = laneX + 'px';
            obstacle.style.top = '600px';
            
            gameContainer.appendChild(obstacle);
            obstacles.push({ element: obstacle, x: laneX, y: 600, type: 'rock' });
        }

        function createTree() {
            const tree = document.createElement('div');
            tree.className = 'tree';
            tree.innerHTML = `
                <div class="tree-crown"></div>
                <div class="tree-trunk"></div>
            `;
            
            const side = Math.random() > 0.5 ? 'left' : 'right';
            tree.style[side] = Math.random() * 100 + 'px';
            tree.style.top = '600px';
            
            gameContainer.appendChild(tree);
            trees.push({ element: tree, y: 600 });
        }

        function updateObstacles() {
            const currentSpeed = isNitroActive ? gameSpeed + 8 : gameSpeed;
            
            // Mettre √† jour les voitures ennemies et obstacles
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                obstacle.y -= currentSpeed;
                obstacle.element.style.top = obstacle.y + 'px';
                
                // Supprimer si hors √©cran
                if (obstacle.y < -100) {
                    obstacle.element.remove();
                    obstacles.splice(i, 1);
                    score += 10;
                    continue;
                }
                
                // V√©rifier collision
                if (checkCollision(obstacle)) {
                    createExplosion(motorcycleX, 500);
                    gameOver();
                    return;
                }
            }
            
            // Mettre √† jour les arbres
            for (let i = trees.length - 1; i >= 0; i--) {
                const tree = trees[i];
                tree.y -= currentSpeed;
                tree.element.style.top = tree.y + 'px';
                
                if (tree.y < -120) {
                    tree.element.remove();
                    trees.splice(i, 1);
                }
            }
            
            // Mettre √† jour les lignes de route
            for (let i = roadLines.length - 1; i >= 0; i--) {
                const line = roadLines[i];
                line.y -= currentSpeed;
                line.element.style.top = line.y + 'px';
                
                if (line.y < -60) {
                    line.element.remove();
                    roadLines.splice(i, 1);
                }
            }
        }

        function checkCollision(obstacle) {
            const motoLeft = motorcycleX;
            const motoRight = motorcycleX + 60;
            const motoTop = 450;
            const motoBottom = 550;
            
            const obsLeft = obstacle.x;
            const obsRight = obstacle.x + (obstacle.type === 'car' ? 50 : 40);
            const obsTop = obstacle.y;
            const obsBottom = obstacle.y + (obstacle.type === 'car' ? 80 : 40);
            
            return motoLeft < obsRight && motoRight > obsLeft && 
                   motoTop < obsBottom && motoBottom > obsTop;
        }

        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.style.left = (x - 50) + 'px';
            explosion.style.top = (y - 50) + 'px';
            gameContainer.appendChild(explosion);
            
            setTimeout(() => explosion.remove(), 500);
        }

        function updateHUD() {
            scoreElement.textContent = `Score: ${score}`;
            distanceElement.textContent = `Distance: ${Math.floor(distance/10)}m`;
            levelElement.textContent = `Niveau: ${level}`;
            
            const speed = isNitroActive ? gameSpeed + 8 : gameSpeed;
            speedValue.textContent = Math.floor(speed * 10);
            speedNeedle.style.transform = `rotate(${Math.min(180, speed * 15)}deg)`;
            
            nitroFill.style.width = nitro + '%';
            nitroFill.style.background = nitro > 20 ? 
                'linear-gradient(90deg, #00FF00, #32CD32)' : 
                'linear-gradient(90deg, #FF4500, #FF6347)';
        }

        function gameOver() {
            gameRunning = false;
            finalScoreElement.textContent = score;
            finalDistanceElement.textContent = Math.floor(distance/10);
            finalLevelElement.textContent = level;
            gameOverScreen.style.display = 'block';
        }

        function restartGame() {
            gameOverScreen.style.display = 'none';
            gameRunning = true;
            resetGame();
            createInitialRoadLines();
        }

        function gameLoop() {
            if (!gameRunning) return;
            
            distance++;
            
            // Augmenter le niveau et la difficult√©
            const newLevel = Math.floor(distance / 500) + 1;
            if (newLevel > level) {
                level = newLevel;
                gameSpeed += 1;
            }
            
            // G√©rer le nitro
            if (isNitroActive && nitro > 0) {
                nitro -= 0.5;
                if (nitro <= 0) {
                    nitro = 0;
                    isNitroActive = false;
                }
            } else if (!isNitroActive && nitro < 100) {
                nitro += 0.2;
            }
            
            updateObstacles();
            updateHUD();
            
            // Cr√©er de nouveaux √©l√©ments
            obstacleFrequency++;
            if (obstacleFrequency > 60 - level * 5) {
                if (Math.random() > 0.3) {
                    createEnemyCar();
                } else {
                    createObstacle();
                }
                obstacleFrequency = 0;
            }
            
            treeFrequency++;
            if (treeFrequency > 80) {
                createTree();
                treeFrequency = 0;
            }
            
            roadLineFrequency++;
            if (roadLineFrequency > 15) {
                createRoadLine();
                roadLineFrequency = 0;
            }
            
            requestAnimationFrame(gameLoop);
        }

        // Contr√¥les
        document.addEventListener('keydown', function(event) {
            keys[event.code] = true;
            
            if (gameRunning) {
                switch(event.code) {
                    case 'ArrowLeft':
                        event.preventDefault();
                        motorcycleX -= MOTORCYCLE_SPEED;
                        updateMotorcyclePosition();
                        break;
                    case 'ArrowRight':
                        event.preventDefault();
                        motorcycleX += MOTORCYCLE_SPEED;
                        updateMotorcyclePosition();
                        break;
                    case 'KeyN':
                        event.preventDefault();
                        if (nitro > 20) {
                            isNitroActive = true;
                        }
                        break;
                }
            }
        });

        document.addEventListener('keyup', function(event) {
            keys[event.code] = false;
            
            if (event.code === 'KeyN') {
                isNitroActive = false;
            }
        });

        // Contr√¥les continus
        setInterval(() => {
            if (gameRunning) {
                if (keys['ArrowLeft']) {
                    motorcycleX -= MOTORCYCLE_SPEED;
                    updateMotorcyclePosition();
                }
                if (keys['ArrowRight']) {
                    motorcycleX += MOTORCYCLE_SPEED;
                    updateMotorcyclePosition();
                }
            }
        }, 16);

        // Emp√™cher le d√©filement avec les fl√®ches
        window.addEventListener('keydown', function(e) {
            if(['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Space'].indexOf(e.code) > -1) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>